# Streams

- `STDIN`
- `STDOUT`
- `STDERR`

**Перенаправление потоков**

- `ls -la > output`
- `>` перезаписывает
- `>>` добавляет

## STDOUT

`echo 'hello' >> result`
`cat result`

## STDERR

`STDERR` позволяет отделить нормальный вывод программы от возникающих ошибок. Такой подход удобен при ведении логов, для реагирования и отладки.
Будьте осторожны, перенаправление вывода в файл перенаправляет только `STDOUT`.

### Перенаправление STDERR в STDOUT

В Unix за каждым потоком закреплён определённый номер, который является файловым дескриптором c потоками ввода и вывода. 2 в данном случае обозначает номер потока STDERR. 

Cуществуют следующие стандартные потоки ввода-вывода:

- STDIN — 0
- STDOUT — 1
- STDERR — 2

В командных оболочках, произошедших от C Shell, по правилам синтаксиса для указания потока, в который осуществляется перенаправление, нужно добавлять символ `&` после символа перенаправления.

```bash
# Сначала STDOUT перенаправляется в файл, затем STDERR перенаправляется в STDOUT, продолжая запись в файл
ls lala > output 2>&1
cat output

ls: cannot access 'lala': No such file or directory
```

### Перенаправление конкретного потока в файл

> Чтобы перенаправить конкретный поток, **нужно указать его номер** перед `>`.

```bash
#  Таким образом можно сразу перенаправить STDERR в файл
cd lala 2> output
cat output

-bash: cd: lala: No such file or directory
```

### Перенаправление обоих потоков в файл

Этот вариант используется наиболее часто, так как помогает легче проводить отладку и понимать почему вообще возникла та или иная ошибка.

```bash
# Оба потока, STDERR и STDOUT, перенаправляются в файл
cd lala &> output
cat output

-bash: cd: lala: No such file or directory
```

## Дополнительно

> [Bash Reference Manual — redirections](https://www.gnu.org/software/bash/manual/bash.html#Redirections) :cool:

## Solution

- `cat source > /tmp/result`
